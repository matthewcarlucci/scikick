# Read in scikick.yml and set variables
from scikick.presnakemake import *

warn(f"SK INTERNAL: logfile {logger.logfile}")

###########################################
# Workflow rules
# - messages are used by status.py
###########################################

# Include the project's Snakefile if it exists
user_snakefile = os.path.join(os.getcwd(), "Snakefile")
if os.path.isfile(user_snakefile):
	warn("sk: Including Snakefile found in project directory")
	include: user_snakefile

# done rule
localrules: sk_done
rule sk_done:
	input:
		expand(skconfig.html_pattern,out_base = skconfig.out_bases)
	message: "All rules from {snake_src} are complete"

# scikick main rule files
include: "render_site.smk"
include: "execute_code.smk"

# Non-default rule files
for snake_include in snake_includes:
    include: snake_include

